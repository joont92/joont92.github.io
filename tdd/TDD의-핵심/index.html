<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="소프트웨어 개발은 학습의 과정이다  흥미로운 프로젝트(== 가장 큰 이익을 줄 만한 프로젝트)에는 예상치 못한 요소가 상당히 많다 갖가지 중요한 구성 요소가 조합된 시스템은 너무나 복잡해서, 개인이 해당 시스템의 모든 가능성을 이해하기는 어렵다 프로젝트에 관련된 모두는 프로젝트가 진행되면서 배우는 것이 있어야 한다  프로젝트에서 무엇을 달성해야 하는지?">
<meta name="keywords" content="테스트 주도 개발로 배우는 객체지향 설계와 실천">
<meta property="og:type" content="article">
<meta property="og:title" content="[tdd] TDD의 핵심">
<meta property="og:url" content="https://joont92.github.io/tdd/TDD의-핵심/index.html">
<meta property="og:site_name" content="기록은 기억의 연장선">
<meta property="og:description" content="소프트웨어 개발은 학습의 과정이다  흥미로운 프로젝트(== 가장 큰 이익을 줄 만한 프로젝트)에는 예상치 못한 요소가 상당히 많다 갖가지 중요한 구성 요소가 조합된 시스템은 너무나 복잡해서, 개인이 해당 시스템의 모든 가능성을 이해하기는 어렵다 프로젝트에 관련된 모두는 프로젝트가 진행되면서 배우는 것이 있어야 한다  프로젝트에서 무엇을 달성해야 하는지?">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://lh3.googleusercontent.com/EMuooqywXPsh2t20YCljB3BHHIA3H9snXX98dTDDx1ZEkGY8I-G-jXT35XmiUM8iaPKMd3vKZGagFN2NmR_FfkLzyici22h-l6kcW7VViJNz8QzMe89vASzCD88ivExTrMc_66bcBoMrU3lS8SWpOuWDCOQnrByvQuczwtJ9JmcfGbgvFD6EaJqIH1KMd84BliUWvzqOkdEAlDr8P0F6pVOm9BAtdKNqt7DBZEmDlWEc9OTKlAbEhvffRGCH2V1-oHHV8WSsRWfXJ-mDDx7seaCJYBW8Wpa4tnG9aJ9FtYNjqZkL4R-O3YT2lFqxtIPJtsCB285H8sPLErBCQaEp5xNnlvtL3U2PAhVagp9mrQO_KhX_8v5nKVmntbOJwBOeRZLbWqyRz8ccCfZ6hQ-dRaz-rSgk14hH2URM9GdKKN3PB5hrw2KBDVVIhSytdUrSAcFiwezPSSrorpk9SODjVFPMDLP5TyK8zg1ncGP8jeuDmefo5C0eQv3RDwbRx8uJvlvXzhmiKRKvqWTor_kyTCfUV5ebQBa27M56heqJyn6YT-oVrmd_z4EXDb_-JWvwDum2vcF16PoW2-5j8P4SjQtiGqP0xLP8IVICbkATr9qWnoG5S6SF47Jg2TUDhemwJoF7j0v9yCZbBYD9g4z7EK3WigEYu_w=w475-h372-no">
<meta property="og:image" content="https://lh3.googleusercontent.com/_vdjJTmSigJ4J05Nj3WXOsWx7SBiBUVhC5vvUoxzRROZHXUp3LZ5zmjc2B-G7CCGy_ZJ_Y7h4RtFqUFGLHe0Mo29XclfuIKSMoX16Z7mM2pI9Rzia76AZQYSP4ST9QlidSOH-5bxfxp2nTDR8odzTTG8m2i08vWkdgbWg0yOCDeGr4qexVulxjUhTg8OmyK0HZ0Du8NT4nB4_O2D5ECj3DRlRQOguscVUbD-9Y6hBn1yARJXYRumoMpdhJhEGA72gqvgXMRbj482hCJcL3cwM3M19Z4JGj_S8L0gbV6cUTlBjqBJSi13-jcRZQgAF1gR1bv39uU8fAN-loBvvWamADMmJrg3A8SPMYqb13KNavO5MllQZhrJMlYa0mwelmAswfNDlUE8310HzsuT3WuxQc4X9C-kO4YEwb3NpvH57mq1zcK-W1k6EFneGyOHWf5xF3W5JSfFiuzCZqFKq9ErI5dXIlhdYndLmu-tfy7qX1-4gV4H6P_tvlTCC6i-vWSXzR2zMsqfzZwnxAaaX2ZGngXKHLvV0h5YurneilSkUwAnx1wC6kOf-a_P8-ouoqajFAQJn9NzqWxIspZizPCNWZekkbEwjSpNfsAkCc3GFykLbSTWvhQesbNXxW1SkAtTFucsASVL9C1g627o7ovTPdMc4c0-jj0=w960-h720-no">
<meta property="og:updated_time" content="2020-11-02T10:09:30.461Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[tdd] TDD의 핵심">
<meta name="twitter:description" content="소프트웨어 개발은 학습의 과정이다  흥미로운 프로젝트(== 가장 큰 이익을 줄 만한 프로젝트)에는 예상치 못한 요소가 상당히 많다 갖가지 중요한 구성 요소가 조합된 시스템은 너무나 복잡해서, 개인이 해당 시스템의 모든 가능성을 이해하기는 어렵다 프로젝트에 관련된 모두는 프로젝트가 진행되면서 배우는 것이 있어야 한다  프로젝트에서 무엇을 달성해야 하는지?">
<meta name="twitter:image" content="https://lh3.googleusercontent.com/EMuooqywXPsh2t20YCljB3BHHIA3H9snXX98dTDDx1ZEkGY8I-G-jXT35XmiUM8iaPKMd3vKZGagFN2NmR_FfkLzyici22h-l6kcW7VViJNz8QzMe89vASzCD88ivExTrMc_66bcBoMrU3lS8SWpOuWDCOQnrByvQuczwtJ9JmcfGbgvFD6EaJqIH1KMd84BliUWvzqOkdEAlDr8P0F6pVOm9BAtdKNqt7DBZEmDlWEc9OTKlAbEhvffRGCH2V1-oHHV8WSsRWfXJ-mDDx7seaCJYBW8Wpa4tnG9aJ9FtYNjqZkL4R-O3YT2lFqxtIPJtsCB285H8sPLErBCQaEp5xNnlvtL3U2PAhVagp9mrQO_KhX_8v5nKVmntbOJwBOeRZLbWqyRz8ccCfZ6hQ-dRaz-rSgk14hH2URM9GdKKN3PB5hrw2KBDVVIhSytdUrSAcFiwezPSSrorpk9SODjVFPMDLP5TyK8zg1ncGP8jeuDmefo5C0eQv3RDwbRx8uJvlvXzhmiKRKvqWTor_kyTCfUV5ebQBa27M56heqJyn6YT-oVrmd_z4EXDb_-JWvwDum2vcF16PoW2-5j8P4SjQtiGqP0xLP8IVICbkATr9qWnoG5S6SF47Jg2TUDhemwJoF7j0v9yCZbBYD9g4z7EK3WigEYu_w=w475-h372-no">



  <link rel="alternate" href="/feed.xml" title="기록은 기억의 연장선" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://joont92.github.io/tdd/TDD의-핵심/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>[tdd] TDD의 핵심 | 기록은 기억의 연장선</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=UA-110551662-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-110551662-1');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">기록은 기억의 연장선</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">더 많은 것을 기억하기 위해 기록합니다</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/joont92" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://joont92.github.io/tdd/TDD의-핵심/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JunYoung Park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="기록은 기억의 연장선">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">[tdd] TDD의 핵심

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-16 09:19:24" itemprop="dateCreated datePublished" datetime="2019-03-16T09:19:24+00:00">2019-03-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-11-02 10:09:30" itemprop="dateModified" datetime="2020-11-02T10:09:30+00:00">2020-11-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/tdd/" itemprop="url" rel="index"><span itemprop="name">tdd</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/tdd/TDD의-핵심/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="tdd/TDD의-핵심/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="소프트웨어-개발은-학습의-과정이다"><a class="markdownIt-Anchor" href="#소프트웨어-개발은-학습의-과정이다"></a> 소프트웨어 개발은 학습의 과정이다</h1>
<ul>
<li>흥미로운 프로젝트(== 가장 큰 이익을 줄 만한 프로젝트)에는 <code>예상치 못한 요소</code>가 상당히 많다</li>
<li>갖가지 중요한 구성 요소가 조합된 시스템은 <code>너무나 복잡</code>해서, 개인이 해당 시스템의 모든 가능성을 <code>이해하기는 어렵다</code></li>
<li>프로젝트에 관련된 모두는 프로젝트가 진행되면서 <code>배우는 것</code>이 있어야 한다
<ul>
<li>프로젝트에서 무엇을 <code>달성해야 하는지</code>?</li>
<li><code>잘못 이해</code>하고 있는 바를 식별</li>
<li><code>해결</code>하고자 <code>협업</code>해야 한다</li>
</ul>
</li>
</ul>
<h1 id="피드백은-가장-기본적인-도구다"><a class="markdownIt-Anchor" href="#피드백은-가장-기본적인-도구다"></a> 피드백은 가장 기본적인 도구다</h1>
<p>팀애서 취할 수 있는 가장 좋은 접근법은 경험에 의거한 피드백을 이용해 시스템과 그 용도에 관해 배운 다음, 이렇게 배운 바를 다시 시스템에 적용하는 것이다<br>
그러므로 이러한 피드백을 얻을 수 있는, 반복적인 활동 주기가 필요하다</p>
<ul>
<li>저자는 모든 개발에 <code>초에서 월 단위에 이르는 중첩된 고리형 시스템</code>의 피드백 주기를 적용했다
<ul>
<li>짝 프로그래밍, 단위 테스트, 인수테스트, 일별 회의, 반복 주기, 출시 등을 사용하여 고리를 구성한다</li>
<li>하나의 고리마다 산출물이 나오고, 이 산출물이 피드백으로 드러나게 된다</li>
<li>팀에서는 빠르게 오해를 발견하고 수정할 수 있다</li>
<li>이렇듯, 중첩된 피드백 고리는 서로를 강화한다</li>
</ul>
</li>
<li><code>안쪽 고리는 기술적 세부 사항</code>에 좀 더 집중한다
<ul>
<li>단위 코드의 역할과 시스템 나머지 부분과의 통합 여부</li>
</ul>
</li>
<li><code>바깥쪽 고리는 조직과 팀</code>에 좀 더 집중한다
<ul>
<li>사용자의 요구를 충족하는지, 팀이 효과적으로 운영되고 있는지</li>
</ul>
</li>
<li>프로젝트의 어떠한 측면에 대해서도 <strong>피드백을 일찍 받을수록 좋다</strong></li>
</ul>
<h1 id="tdd가-왜-중요할까"><a class="markdownIt-Anchor" href="#tdd가-왜-중요할까"></a> TDD가 왜 중요할까?</h1>
<p>시스템 규모를 믿을 수 있는 방식으로 키우고, 늘 일어나는 예상치 못한 변화에 대처하고 싶다면 두가지 기술적인 토대가 필요하다</p>
<ul>
<li>테스트 자동화
<ul>
<li>시스템 규모와 상관없이 수동테스트를 자주 하는것은 비실용적이다</li>
<li>회기 오류를 잡아줄 꾸준한 테스트가 필요하다</li>
<li>기존 기능을 망가뜨리지 않고 새 기능을 추가할 수 있다</li>
</ul>
</li>
<li>꾸준한 리팩토링
<ul>
<li>개발자들은 코드를 작성하는 것보다 코드를 읽는데 훨씬 더 시간을 많이 보낸다</li>
<li>그러므로 코드를 가능한 한 단순하게 유지해야 한다</li>
<li>단순함에는 노력이 많이 들어간다</li>
<li>설계 개선하고 단순화하며, 중복을 제거하며, 코드가 명확하게 자신의 역할을 표현하게끔 코드를 사용할때마다 꾸준히 리팩토링 해야한다</li>
</ul>
</li>
</ul>
<p>하지만 여기서 문제는, 대부분의 개발자들이 테스트 작성을 <code>업무</code>로 보지 않으며, 따분하다고 여기기 까지 한다는 것이다.<br>
테스트 주도 개발은 이러한 상황을 근본적으로 뒤집는다.</p>
<p>작업을 완료한 후 작업 결과를 검증하려고 테스트를 작성하는 것이 아니라(Test Last),<br>
<strong>코드를 작성하기 전에 테스트를 먼저 작성한다</strong>.<br>
즉, 테스트 작성 자체가 설계 활동이 되는 것이다.</p>
<ul>
<li>테스트를 먼저 작성함으로써 코드에서 하고 싶은바에 대한 생각을 명확하게 하고,</li>
<li>테스트를 먼저 작성하려는 노력으로 설계 아이디어의 품질에 대한 피드백도 빠르게 얻을 수 있게된다
<ul>
<li>코드를 테스트하기 쉽게 만들면 좀 더 깔끔하고 모듈화된 코드가 만들어지기 때문이다</li>
</ul>
</li>
</ul>
<h1 id="tdd-간단-정리"><a class="markdownIt-Anchor" href="#tdd-간단-정리"></a> TDD 간단 정리</h1>
<p>TDD 작성 순서는 아래와 같다</p>
<p><img src="https://lh3.googleusercontent.com/EMuooqywXPsh2t20YCljB3BHHIA3H9snXX98dTDDx1ZEkGY8I-G-jXT35XmiUM8iaPKMd3vKZGagFN2NmR_FfkLzyici22h-l6kcW7VViJNz8QzMe89vASzCD88ivExTrMc_66bcBoMrU3lS8SWpOuWDCOQnrByvQuczwtJ9JmcfGbgvFD6EaJqIH1KMd84BliUWvzqOkdEAlDr8P0F6pVOm9BAtdKNqt7DBZEmDlWEc9OTKlAbEhvffRGCH2V1-oHHV8WSsRWfXJ-mDDx7seaCJYBW8Wpa4tnG9aJ9FtYNjqZkL4R-O3YT2lFqxtIPJtsCB285H8sPLErBCQaEp5xNnlvtL3U2PAhVagp9mrQO_KhX_8v5nKVmntbOJwBOeRZLbWqyRz8ccCfZ6hQ-dRaz-rSgk14hH2URM9GdKKN3PB5hrw2KBDVVIhSytdUrSAcFiwezPSSrorpk9SODjVFPMDLP5TyK8zg1ncGP8jeuDmefo5C0eQv3RDwbRx8uJvlvXzhmiKRKvqWTor_kyTCfUV5ebQBa27M56heqJyn6YT-oVrmd_z4EXDb_-JWvwDum2vcF16PoW2-5j8P4SjQtiGqP0xLP8IVICbkATr9qWnoG5S6SF47Jg2TUDhemwJoF7j0v9yCZbBYD9g4z7EK3WigEYu_w=w475-h372-no" alt="TDD cycle"></p>
<p>다들 잘 아는 <code>Red-Green-Refactor</code> cycle이다.</p>
<ol>
<li>테스트를 작성한다
<ul>
<li>프로덕션 코드가 없으므로 당연히 실패한다(Red)</li>
</ul>
</li>
<li>해당 테스트가 동작하게(Green) 만든다</li>
<li>테스트는 건드리지 않고 프로덕션 코드를 리팩토링 한다</li>
<li>이를 반복한다</li>
</ol>
<p>테스트를 먼저 작성함으로써 얻는 이점은 아래와 같다</p>
<ol>
<li>다음 작업에 대한 인수 조건이 명확해진다
<ul>
<li>작업이 끝나는 시점을 스스로 알아내야 하기 때문이다</li>
</ul>
</li>
<li>느슨하게 결합된 구성 요소를 작성할 수 있게 된다
<ul>
<li>격리된 상태에서, 더 높은 수준으로, 모두 결합된 상태로 구성 요소를 손쉽게 테스트 할 수 있다</li>
</ul>
</li>
<li>코드가 하는 일에 대한 설명이 더해진다
<ul>
<li>테스트 코드는 일종의 스펙 문서 역할도 한다</li>
</ul>
</li>
<li>완전한 회귀 스위트가 늘어난다</li>
</ol>
<blockquote>
<p>사실상 2,3,4 번은 Test First Development 보단 단순히 테스트 작성에서 얻을 수 있는 이점들이다.<br>
하지만 언급했다시피, 테스트를 나중에 작성하는 방식은 힘들고, 현실적으로 위의 이점들을 다 가져가지 못할 가능성이 크다.</p>
</blockquote>
<p>그리고 테스트를 실행하면 얻는 이점은 아래와 같다</p>
<ul>
<li>컨텍스트를 선명하게 인지하는 동안 오류를 탐지한다(?)</li>
<li>언제 작업이 충분히 완료되었는지 알게된다
<ul>
<li>‘금도긋’ 하듯 과도한 최적화를 하거나 불필요한 기능을 더하지 않게 된다</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>TDD의 황금률(?)</strong><br>
실패하는 테스트 없이는 새 기능을 작성하지 말라</p>
</blockquote>
<h2 id="좀-더-큰-그림"><a class="markdownIt-Anchor" href="#좀-더-큰-그림"></a> 좀 더 큰 그림</h2>
<p>어플리케이션 내에 있는 클래스들을 대상으로 단위 테스트를 작성하는 것으로 TDD를 시작해보고 싶을 수 있으나, 결과적으로 단위 테스트만 있는 프로젝트는 TDD 프로세스가 주는 아주 중요한 혜텍을 놓치는 셈이 된다.<br>
<strong>좀 더 큰 그림을 봐야한다.</strong><br>
(물론 단위테스트가 없는 프로젝트 보다는 백배 천배 낫다)</p>
<p><img src="https://lh3.googleusercontent.com/_vdjJTmSigJ4J05Nj3WXOsWx7SBiBUVhC5vvUoxzRROZHXUp3LZ5zmjc2B-G7CCGy_ZJ_Y7h4RtFqUFGLHe0Mo29XclfuIKSMoX16Z7mM2pI9Rzia76AZQYSP4ST9QlidSOH-5bxfxp2nTDR8odzTTG8m2i08vWkdgbWg0yOCDeGr4qexVulxjUhTg8OmyK0HZ0Du8NT4nB4_O2D5ECj3DRlRQOguscVUbD-9Y6hBn1yARJXYRumoMpdhJhEGA72gqvgXMRbj482hCJcL3cwM3M19Z4JGj_S8L0gbV6cUTlBjqBJSi13-jcRZQgAF1gR1bv39uU8fAN-loBvvWamADMmJrg3A8SPMYqb13KNavO5MllQZhrJMlYa0mwelmAswfNDlUE8310HzsuT3WuxQc4X9C-kO4YEwb3NpvH57mq1zcK-W1k6EFneGyOHWf5xF3W5JSfFiuzCZqFKq9ErI5dXIlhdYndLmu-tfy7qX1-4gV4H6P_tvlTCC6i-vWSXzR2zMsqfzZwnxAaaX2ZGngXKHLvV0h5YurneilSkUwAnx1wC6kOf-a_P8-ouoqajFAQJn9NzqWxIspZizPCNWZekkbEwjSpNfsAkCc3GFykLbSTWvhQesbNXxW1SkAtTFucsASVL9C1g627o7ovTPdMc4c0-jj0=w960-h720-no" alt="ATDD"></p>
<p>기존의 TDD 라이프 사이클에서 앞단에 <code>인수 테스트(Acceptance test) 작성</code> 이라는 부분이 추가 되었다.<br>
(<a href="/tdd/%EC%9D%B8%EC%88%98%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8B%A8%EC%9C%84%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%86%B5%ED%95%A9%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A0%84-%EA%B5%AC%EA%B0%84-%ED%85%8C%EC%8A%A4%ED%8A%B8.md">인수테스트-단위테스트-통합테스트-전-구간-테스트</a>)</p>
<blockquote>
<p>여기서는 전 구간 테스트를 사용하여 인수 테스트를 수행한다</p>
</blockquote>
<p>그리고 TDD의 황금률에, 이 인수 테스트까지 같이해서 코드 작성을 시작한다.</p>
<ol>
<li>실패하는 인수 테스트를 작성한다
<ul>
<li>이 테스트가 실패한다는 말은 아직까지 해당 기능을 구현하지 않았다는 것을 보여준다</li>
</ul>
</li>
<li>단위 테스트들을 작성해나가며 기능을 완성해나간다
<ul>
<li>전 구간 테스트이기 때문에, 많은 단위 테스트들을 포함한다</li>
<li>TDD cycle을 사용하여 단위 기능들을 개발해나간다</li>
</ul>
</li>
<li>인수테스트가 통과하면, 작업이 끝난다
<ul>
<li>이때서야 시스템이 배포될 수 있다</li>
</ul>
</li>
</ol>
<h1 id="외부-품질과-내부-품질"><a class="markdownIt-Anchor" href="#외부-품질과-내부-품질"></a> 외부 품질과 내부 품질</h1>
<ul>
<li><strong>외부 품질</strong>
<ul>
<li>시스템이 고객과 사용자의 요구를 얼마나 잘 충족하는가(기능, 신뢰성, 가용성, 응답성 등)이다</li>
<li>보통 계약의 일부라, 이를 이해하지 못할 사람은 없다</li>
<li>전 구간 테스트를 사용한다</li>
<li>전 구간 테스트로는 코드를 얼마나 잘 작성했는지는 알 수 없다</li>
</ul>
</li>
<li><strong>내부 품질</strong>
<ul>
<li>시스템이 개발자와 관리자의 요구를 얼마나 잘 충족하는가(이해하기 쉬운가, 변경하기 쉬운가) 이다</li>
<li>외부 품질과 똑같이 중요하지만, 달성하기는 많이 어렵다</li>
<li>단위 테스트를 사용한다</li>
<li>단위 테스트로는 시스템이 전체적으로 동작하는지를 충분히 확신할 수 없다</li>
</ul>
</li>
</ul>
<h2 id="높은-내부-품질은-어떻게-달성할-수-있을까"><a class="markdownIt-Anchor" href="#높은-내부-품질은-어떻게-달성할-수-있을까"></a> 높은 내부 품질은 어떻게 달성할 수 있을까?</h2>
<ul>
<li><code>높은 응집과 낮은 결합</code>을 유지해야한다
<ul>
<li>코드의 동작 방식을 얼마나 쉽게 바꿀 수 있는지를 설명하는 척도이기 때문이다</li>
<li>한 요소의 변경이 다른 요소의 변경에 영향을 미친다면, 그 두 요소는 <code>결합</code>되어 있는 것이다.
<ul>
<li>이를 최대한 낮게 유지해야 한다</li>
</ul>
</li>
<li><code>응집도</code>는 해당 요소의 책임이 의미있는 단위를 형성하는지 나타내는 척도이다
<ul>
<li>날짜와 URL을 파싱하는 기능이 같이 들어간 클래스는 응집도가 낮다고 표현할 수 있다</li>
<li>그리고, 두 가지 기능을 다 잘할 가능성이 낮다</li>
</ul>
</li>
</ul>
</li>
<li>객체에 대한 단위테스트를 많이 해야한다
<ul>
<li>객체를 생성하고, 객체의 의존성을 제공하며, 객체와 상호 작용하고, 예상대로 동작하는지 검사할 필요가 있다</li>
</ul>
</li>
<li>설계를 잘못하면 단위 테스트를 작성하거나 이해하기 어렵다
<ul>
<li>예를 들면 클래스가 멀리 떨어져있는 시스템의 일부와 긴밀하게 결합되어 있거나, 암시적인 의존성이 있거나, 불분명한 책임이 너무 많을때 등이 있다</li>
</ul>
</li>
</ul>
<p>결과적으로 <code>높은 응집과 낮은 결합</code>을 가진 객체가 많아야 높은 내부 품질을 유지할 수 있게 되는데, 테스트 작성이 이를 측정하는 기준점이 될 수 있다.<br>
TDD는 테스트를 먼저 작성함으로써, 이러한 설계에 관한 즉각적인 피드백을 바로 얻을 수 있다는 큰 장점이 있다.</p>
<a id="more"></a>
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/테스트-주도-개발로-배우는-객체지향-설계와-실천/" rel="tag"># 테스트 주도 개발로 배우는 객체지향 설계와 실천</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/spring/spring-batch-AsyncTaskExecutor-등록/" rel="next" title="[spring] spring batch AsyncTaskExecutor 등록">
                <i class="fa fa-chevron-left"></i> [spring] spring batch AsyncTaskExecutor 등록
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/etc/CRC-card/" rel="prev" title="CRC card">
                CRC card <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">JunYoung Park</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">182</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">344</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/feed.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#소프트웨어-개발은-학습의-과정이다"><span class="nav-number">1.</span> <span class="nav-text"> 소프트웨어 개발은 학습의 과정이다</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#피드백은-가장-기본적인-도구다"><span class="nav-number">2.</span> <span class="nav-text"> 피드백은 가장 기본적인 도구다</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tdd가-왜-중요할까"><span class="nav-number">3.</span> <span class="nav-text"> TDD가 왜 중요할까?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tdd-간단-정리"><span class="nav-number">4.</span> <span class="nav-text"> TDD 간단 정리</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#좀-더-큰-그림"><span class="nav-number">4.1.</span> <span class="nav-text"> 좀 더 큰 그림</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#외부-품질과-내부-품질"><span class="nav-number">5.</span> <span class="nav-text"> 외부 품질과 내부 품질</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#높은-내부-품질은-어떻게-달성할-수-있을까"><span class="nav-number">5.1.</span> <span class="nav-text"> 높은 내부 품질은 어떻게 달성할 수 있을까?</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JunYoung Park</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> v3.6.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>



  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  
  
  <script id="dsq-count-scr" src="https://joont92.disqus.com/count.js" async></script>


<script>
  var disqus_config = function() {
    this.page.url = "https://joont92.github.io/tdd/TDD의-핵심/";
    this.page.identifier = "tdd/TDD의-핵심/";
    this.page.title = '[tdd] TDD의 핵심';
    };
  function loadComments() {
    var d = document, s = d.createElement('script');
    s.src = 'https://joont92.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    loadComments();
  
</script>





  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>

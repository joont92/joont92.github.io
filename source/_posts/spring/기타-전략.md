---
title: 기타 전략
date: 2018-02-04 23:22:22
tags:
    - HandlerExceptionResolver
    - 
---

HandlerMapping, HandlerAdapter, ViewResolver 등 외에도 DispatcherServlet에는 다양한 확장 가능한 전략들이 존재한다.  
아래는 남은 전략들 중 중요한 것들만을 나열한 것이다.  

### 핸들러 예외 리졸버
HandlerExceptionResolver는 컨트롤러 작업 중 발생한 예외를 어떻게 처리할 지 결정하는 전략이다.  
컨트롤러나 그 뒷 계층에서 발생한 예외는 일단 DispatcherServlet이 전달받은 다음 다시 서블릿으로 던져서 서블릿 컨테이너가 처리하게 된다.  
별다른 처리를 하지 않았다면 '500 Internal Server Error' 같은 메시지가 출력될 것이다.  
그런데 핸들러 예외 리졸버가 등록되어있다면 DispatcherServlet은 먼저 이 리졸버가 해당 예외를 처리할 수 있는지 확인한다.  
만약 해당 예외를 처리할 수 있으면 예외는 DispatcherServlet 밖으로 던져지지 않고 해당 핸들러 예외 리졸버가 처리한다.  

핸들러 예외 리졸버는 HandlerExceptionResolver 인터페이스를 구현해서 생성한다.  
```java
public interface HandlerExceptionResolver{
    ModelAndView resolveException(HttpServletRequest reqeust, HttpServletResponse response, Object handler, Exception ex);
}
```
구현 메서드인 resolveException의 리턴 타입은 ModelAndView이다.  
예외에 따라 사용할 뷰와 모델을 돌려주도록 되어있다.  
만약 처리 불가능한 예외라면 null을 리턴한다.  

스프링은 이미 4개의 HandlerExceptionResolver 구현 전략을 제공한다.  

#### AnnotationMethodHandlerExceptionResolver
예외가 발생한 컨트롤러 내의 메서드 중에서 @ExceptionHandler 어노테이션이 붙은 메서드를 찾아 예외처리를 맡긴다.  
```java
@Controller
public class HelloController{
    @RequestMapping(value="/hello")
    public void hello(){
        // occured DataAccessException
    }

    @ExceptionHandler(DataAccessException.class)
    public ModelAndView dataAccessExceptionHandler(DataAccessException ex){
        return new ModelAndView("error").addObject("msg", ex.getMessage());
    }
}
```
---
title: 양방향 연관관계에서 서로간 컨트롤 할수있는 범위
date: 2018-12-06 01:49:20
tags:
    - 양방향 연관관계
    - 연관관계 편의 메서드
    - cascade
    - orphanRemoval
---

# 전제
```java
@Entity
class Member{
    @Id
    @GeneratedValue
    @Column("id")
    private Integer id;

    @Column("name")
    private String name;

    @Column("age")
    private String age;

    @ManyToOne(optional = false)
    @JoinColumn(name = "team_id")
    private Team team;
}

@Entity
class Team{
    @Id
    @GeneratedValue
    @Column("id")
    private Integer id;

    @Column("name")
    private String name;

    @OneToMany(mappedBy = "team")
    private List<Member> members;
}
```

# 기본기능
1. Member
외래키 컨트롤 가능
Team 업데이트 가능

2. Team
외래키 컨트롤 불가능
자신에게 속한 모든 Member들 update 가능


연관관계 편의메서드를 추가함으로써 Member에서도 외래키 컨트롤 가능  

`remove 연관관계 편의 메서드 + 삭제 기능` 을 제공하는 `orphanRemoval`이 있음  
일반적인 연관관계 편의메서드는 delete 까지 수행하진 않고, FK를 null 처리함  

<!-- more -->
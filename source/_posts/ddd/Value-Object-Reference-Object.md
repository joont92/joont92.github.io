---
title: Value Object, Reference Object
date: 2019-02-12 11:19:22
tags:
	- DDD
---

REFERENCE OBJECT : 실세계의 추적 가능한 개념
VALUE OBJECT : 단순 값

추적해야하는 값이면 REFERENCE OBJECT로 만들고, 단순 값이라면 VALUE OBJECT로 만들면 된다

# 특징
- 동일함
모든 객체지향 시스템은 생성된 객체에게 고유 식별자를 부여한다
대부분의 객체지향 언어는 객체가 위치하고 있는 메모리 상의 주소를 식별자로 사용하고, 이를 이용해 객체를 구별한다.  
	- REFERENCE OBJECT는 시스템 내에서 유일해야 하므로 == 연산자를 통해 식별해야 함 
	- VALUE OBJECT는 유일할 필요가 없으므로 equals를 통해 동등한지만 판단하면 됨

- 별칭문제
여러개의 변수가 하나의 객체를 참조할 수 있다는 특징
메서드의 인자로 REFERENCE OBJECT를 넘기는 순간 별칭이 생기게 되며, 이를 막을 수 없음
final 또한 자식의 변화를 막을 수 없음(참조변경만을 막을 뿐)

# Value Object
불변성을 가짐
- 모든 필드를 final private로 만듦
- 값의 변경이 있을떄마다 해당 필드의 값을 변경하는 것이 아니라 변경된 값을 가진상태의 새로운 객체를 생성해서 반환
	- 추적성과 별칭 문제에 대해 부담이 없어짐
	- 일반적으로 날짜, 금액 등의 작은 개념을 의미하므로 새로운 객체를 만들어도 오버헤드가 적고, 추적성에도 관심을 가질 필요가 없기 떄문에 굳이 동일 객체를 유지할 필요가 없다
	- 기존 객체는 가비지컬렉션의 대상이 됨

# Reference Object
계속 변화해야함
- 여기서는 별칭이 문제가 아니라 요구사항임. 항상 추적 가능해야함
- 최초 속성이 그대로 유지되는 추적 가능한 도메인이라면 Reference Object를 불변 객체로 만드는 것이 최선의 방법
	- setter를 만들지 않으면 됨  
	- 그렇지 않다면 가변 객체로 변경해야함  

> - 참조  
> 	- <http://aeternum.egloos.com/1105776>  
>	- <http://aeternum.egloos.com/1111257>  

<!-- more -->
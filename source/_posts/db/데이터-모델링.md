---
title: 데이터 모델링
date: 2018-04-18 23:45:09
tags:
    - Real MySQL
photo : 
    
    - https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTU2NzA4ODQmdHlwZT1sJno9MjIvMDQvMjAxOCAxMjo1Nw==
---

데이터 모델링은 DBMS 사용에 가장 중요한 부분이면서 가장 쉽게 간과되는 부분이기도 하다.  
데이터 모델링은 크게 `논리 모델링`과 `물리 모델링`으로 나눌 수 있다.  
제대로 표현되고 있는 곳은 잘 없지만,  
원래 논리 모델링과 물리 모델링의 차이는 테이블/칼럼 등의 이름이 영어냐 한글이냐가 아니라, 모델에 표현하려는 것이 업무냐 시스템이냐의 차이다.  
업무를 분석하여 그에 대한 데이터 집합/관계를 중점적으로 표현하는 것이 논리 모델링이고,  
그 산출물을 시스템으로 어떻게 표현할지 고려하는 것을 물리 모델링이라고 볼 수 있다.  

---

# 모델링 용어
ERD상에 표현되는 오브젝트는 논리 모델링이냐 물리 모델링이냐에 따라 각각 이름이 다르게 표현된다.  

논리 모델 | 물리 모델
- | - 
엔티티(Entity) | 테이블(Table)
속성, 어트리뷰트(Attribute) | 컬럼(Column)
관계, 릴레이션(Relation) | 관계, 릴레이션(Relation)
키 그룹(Key group) | 인덱스(Index)

---

# 논리 모델링
## 엔티티
객체지향 언어에서 클래스와 동급의 의미다.  
일반적으로 2개 이상의 속성을 가지고, 1개 이상의 레코드를 가지는 오브젝트를 말한다.  
엔티티를 도출할 때 가장 중요한 것은 용어의 정의다.  
해당 용어가 의미하는 범위가 어디까지인지 명확히 하고, 그에 걸맞는 이름을 부여해야 한다.  
그래야만 다음으로 도출할 속성이나 식별자, 관계가 명확해질 수 있다.  

![엔티티](https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTA3OTk5NDcmdHlwZT1sJno9MjAxOC8wNC8yMCAyMzoxNA==#width30)  

### 엔티티 종류
엔티티는 크게 키 엔티티, 메인 엔티티, 액션 엔티티로 구분할 수 있다.  

`키 엔티티`는 대상 데이터 중 가장 최상위에 존재하는 엔티티이다.  
일반적으로 현실에 존재하는 객체를 표현하는 경우가 많다. 사원, 고객, 상품 등의 엔티티는 대표적인 키 엔티티이다.  

`메인 엔티티`는 키 엔티티를 부모로 가지며 서비스에서 상당히 중요한 역할을 하는 엔티티를 말한다.  
대표적으로 구매, 계약 등이 있다.  

이 외에 일반적인 자식 엔티티들은 전부 `액션 엔티티`라고 부른다.  
액션 엔티티도 나중에 업무가 변화하고 확장되면 메인 엔티티로 향상될 수 있다.  

![메인 엔티티](https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTA5ODA3NjMmdHlwZT1sJno9MjEvMDQvMjAxOCAwMDoxNw==#width80)  

### 엔티티 작명
엔티티의 이름은 복수형 표현을 사용하지 않고 별도의 수식어가 없는 단순 또는 복합 명사 형태를 사용한다.  
1. 복수형 표현의 예로 목록, 리스트 등의 단어가 있는데, 테이블 자체가 이미 레코드의 목록을 저장하는 객체이므로 이 같은 이름을 사용할 필요는 없다.  
2. 엔티티의 이름에 수식어가 있다면 주의해서 검토하고, 필요하다면 통합하는 것이 좋다. ex) 상품(O), 고객용상품(X), 직원용상품(X)  
3. 애매모호한 단어도 피하는 것이 좋다. ex) 사원(O), 사원정보(X)  

## 어트리뷰트(속성)
엔티티가 가지고 있는 속성으로써, 더 이상 분리될 수 없는 최소의 데이터 보관 단위이다.  

### 어트리뷰트 원자성
어트리뷰트는 반드시 독자적인 성질을 가지는 하나의 값만을 저장해야 한다.  
그런데 값의 최소단위라는 것이, 표현되는 서비스에 따라 달라질 수 있다.  
예를 들면 주소가 있다.  
주소를 시군구, 읍면동 단위로 조작하는 행위가 많다면 최소 단위를 잘게 쪼개야 맞는것이겠지만, 그렇지 않다면 굳이 잘게 쪼개어 관리를 어렵게 할 이유는 없다.  

하지만 이런 경우가 아닌 상태에서 어트리뷰트에 여러 값을 저장하는 행위는 지양해야 한다.  
예를 들면 회원 취미 정보를 하나의 어트리뷰트에 구분자로 한꺼번에 저장하는 경우이다.  
이는 어트리뷰트의 원자성에 위배되며 물리 모델링, 성능에 나쁜 영향을 미칠 가능성이 크다.  

### 어트리뷰트 작명
어트리뷰트는 그 이름 자체만으로 그 의미를 이해할 수 있게 작명하는 것이 좋다.  
사람들은 대부분 어트리뷰트의 이름을 최대한 간단히 작명하려는 경향이 있는데, 이름을 너무 간략히 작성하면 나중에 그 의미를 혼동하기 쉽다.  
아래는 잘못된 어트리뷰트 명명의 예시이다.  

![너무 간략히 작명된 속성명](https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTEwOTUzMzEmdHlwZT1sJno9MjEvMDQvMjAxOCAwMDo1NQ==#width30)  

속성을 하나씩 살펴보자.  
1. 번호    
    어트리뷰트의 이름은 최소한 `범위를 한정하는 한정자`와 `값을 표현하는 명사`로 구성해줘야 한다.  
    `번호`의 경우 `값을 표현하는 명사`만 사용되어 가독성이 떨어진다. 누군가는 이를 회원번호가 아니라 전화번호라고 생각할 수도 있다.  
    회원아이디, 회원일련번호 등으로 변경하는 것이 좋다.  
2. 주소
    지금은 어느정도 전달력이 있지만 만약 이 외에 `사무실 주소`라는 어트리뷰트가 추가로 있다면, 이 어트리뷰트가 자택 주소를 나타낸다는 보장이 없어진다.  
    이러한 경우 때문에 단어 하나로만 구성된 어트리뷰트는 배제하도록 노력해야 한다.  
3. 상태
    이게 무슨 상태를 나타내는 것인지는 ERD를 설계한 사람만이 알 것이다.  
    게다가 실수로라도 여기에 설계자가 의도한 값 외의 값이 들어가게 된다면, 이 어트리뷰트는 거의 쓰레기 수준으로 관리될 것이다.  
4. 로그인
    `번호`와는 반대로 `범위를 한정하는 한정자`만 사용된 케이스이다.  
    로그인 일시를 의미하는건지, 로그인 IP를 의미하는 건지 전혀 알 수 없다.  

1번에서 언급하였듯이 어트리뷰트의 이름은 `범위를 한정하는 한정자 + 값을 표현하는 명사`로 구성하는 것이 가장 이상적이다.  
어트리뷰트의 이름이 너무 길어지면 물리모델링 과정에서 까다로워지므로 단어 2~4개 정도를 결합해서 사용하는 것이 좋다.  

## 식별자(프라이머리 키)
식별자는 `본질 식별자`와 `실질 식별자`로 나눌 수 있다.  
본질 식별자는 엔티티의 레코드가 생성될 수 있는 기본 조건 어트리뷰트의 조합을 말한다.  
위에서 메인 엔티티를 설명할 때 사용했던 `구매` 테이블의 경우 본질 식별자로 `고객아이디+상품코드+구매일자`를 가지고 있는 것이다.  
근데 구매 엔티티의 경우 주문이력, 상태변화 등 수많은 자식 엔티티를 가질 가능성이 상당히 높다.  
근데 현재와 같이 본질 식별자를 식별자로 사용할 경우, 자식 엔티티의 경우 부담해야하는 어트리뷰트의 개수가 계속해서 많아지게 된다.  
이럴 경우 별도의 인위적인 값을 생성하여 이를 식별자로 사용하는 경우가 많다.  
이때 사용되는 식별자를 `인조 식별자`라고 한다.  
![인조 식별자 사용](https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTEwMDczNjUmdHlwZT1sJno9MjEvMDQvMjAxOCAwMDoyNQ==#width30)  
엔티티의 실질적인 식별자인 `실질 식별자`는 본질 식별자가 될 수도 있고, 인조 식별자가 될 수도 있는 것이다.  

## 관계(릴레이션)
엔티티간 상호작용을 표현해주는 것을 말한다.  
엔티티와 동일하게 매우 중요한 역할을 수행한다. 관계없이 엔티티만 있는 ERD는 ERD로 볼 수 없다.  

### 식별 관계와 비식별 관계
부모 엔티티의 식별자가 자식 엔티티의 식별자로 포함될 경우 `식별 관계`,  
그냥 일반 어트리뷰트로 포함될 경우 `비식별 관계`라고 한다.  
![식별 관계와 비식별 관계](https://cloud2.zoolz.com/MyComputers/Images/Image.aspx?q=bT00MDcyNDcma2V5PTIwOTQzMDcxMTAmdHlwZT1sJno9MjAxOC8wNC8yMiAwMDoyMA==)  
부모 엔티티가 자식 엔티티를 만들어 내는데 필수적인 역할을 하고 있을 경우 식별 관계를 형성할 대상이 될 수 있다.  
하지만 그 대상을 모두 식별 관계로 형성하면 자식의 식별자가 너무 많아지므로 관계 중 유일성을 보장할 수 있는 최소한의 대표 관계만 식별 관계로 선택하고, 나머지는 비식별 관계로 선택하는 것이 좋다.  

### 관계의 기수성



<div style="text-align: right">
출처 : ![](http://cfile7.uf.tistory.com/image/0277164B51BB17D217ECC9#width40#right)
</div>

<!-- more -->
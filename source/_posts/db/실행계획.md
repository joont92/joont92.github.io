---
title: 실행계획
tags:
---

- 실행계획 절차  
1. SQL 파서 모듈을 통해 작성된 SQL을 잘개 쪼갠다.(SQL 파스 트리 생성)
2. 생성된 SQL 파스트리를 통해 옵티마이저가 불필요한 연산 제거, 어떤 인덱스를 사용할지, 어떤 테이블을 선행할지 등을 결정한다.
3. 결정된 실행계획을 가지고 스토리지 엔진으로부터 데이터를 가져옴

- 옵티마이저 종류
규칙기반(rule based optimizer), 비용기반(cost based optimizer)가 있다.
거의 대부분이 CBO를 사용한다.

- 통계 정보
CBO에서 가장 중요한 정보이다. 통계정보가 잘못되면 엉뚱한 방향으로 쿼리가 실행될 수 있다.
MySQL은 통계정보가 다양하지 않은 편. 전체 레코드의 대략적 건수, 인덱스 유니크 값 개수 정도가 전부이다.
ANALYZE 명령으로 통계정보를 갱신할 수 있다.
```SQL
ANALYZE TABLE '테이블명'
```
ANALYZE 명령 시,
MyISAM 테이블의 경우 쓰기는 불가능하고 읽기는 가능
InnoDB 테이블의 경우 쓰기와 읽기 둘 다 불가능

- 실행계획 분석
```SQL
EXPLAIN [쿼리]
```
와 같이 입력하면 실행계획 표가 출력됨.
표의 로우는 사용하는 테이블의 개수만큼 출력됨(서브쿼리, 임시테이블 등 포함)
실행순서는 위에서 아래로
CRUD의 경우 실행계획 분석이 불가능하다. WHERE 절에 사용되는 부분만 따로 빼내서 실행계획을 분석하던지 해야 한다.

1. id 칼럼
단위 SELECT 쿼리별로 부여되는 식별자 값(조인의 경우 같은 ID가 부여된다)  

2. select_type 컬럼

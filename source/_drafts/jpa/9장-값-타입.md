---
title: 9장-값 타입
date: 2018-09-06 18:50:01
tags:
---

- 기본 값 타입
Primitive Type : int, double ..
Wrapper Type : Integer, Double ..
String

- 임베디드 타입
새로운 값 타입을 직접 정의해서 사용할 수 있음
@Entity
@Table(name="USER")
public class User{
     @Id @GeneratedValue
     @Column(name="USER_ID")
     private Long id;

     @Embedded
     private Address address;
}

@Embeddable
public class Address{
     @Column(name="city")
     private String city;     
     @Column(name="street")
     private String street ;
     @Column(name="zipcode")
     private String zipcode ;
}
> 응집력이 훨씬 좋아졌다.
@Embeddable : 값 타입을 정의하는 곳
@Embedded : 값 타입을 사용하는 곳

create table USER (
    USER_ID bigint not null,
    city varchar(255),
    street varchar(255),
    zipcode varchar(255),
    USER_NAME varchar(255),
    LOCKER_ID bigint,
    TEAM_ID bigint,
    primary key (USER_ID)
)
> 요렇게 만들어짐.. 매우 훌륭하다 ㅋㅋ
setAddress(null); 하게 되면 Address 내부의 값들이 전부 null로 세팅된다.

임베디드 타입 내부에서 추가로 @Embedded 할 수 있고, 아래와 같이 엔티티를 참조할 수도 있다.
@Embeddable
public class PhoneNumber{
     @Column("PHONE_NUMBER")
     String phoneNumber;
     @ManyToOne
     PhoneServiceProvider phoneServiceProvider;

     // getter, setter
}

inner class로 embeddable을 줄 수 있다.

@Entity
@Table(name="test_table")
public class TestTable{
     @EmbeddedId
     private TestTablePk id;

     @Embeddable
     // repository에서 바로 참조가능하도록 static class로 선언
     public static class TestTablePk implements Serializable{ // 복합키는 Serializable을 필수로 구현해야함
          // ....
     }
}


@Entity
@Table(name="place_recommend_img")
@Component
@Scope(value="prototype")
public class PlaceRecommendImg {
      @EmbeddedId
      private PlaceRecommendImgPk id;

      public PlaceRecommendImgPk getId() {
            return id;
      }
      public void setId(PlaceRecommendImgPk id) {
            this.id = id;
      }
      @Embeddable
      public static class PlaceRecommendImgPk implements Serializable{
            private static final long serialVersionUID = 1L;

            public PlaceRecommendImgPk(){}
            public PlaceRecommendImgPk(PlaceRecommend rid, AttachFile fileId){
                  this.rid = rid;
                  this.fileId = fileId;
            }

            @ManyToOne
            @JoinColumn(name="rid")
            private PlaceRecommend rid;

            @OneToOne
            @JoinColumn(name="file_id")
            private AttachFile fileId;
            public PlaceRecommend getRid() {
                  return rid;
            }
            public void setRid(PlaceRecommend rid) {
                  this.rid = rid;
            }
            public AttachFile getFileId() {
                  return fileId;
            }
            public void setFileId(AttachFile fileId) {
                  this.fileId = fileId;
            }
      }
}

<!-- more -->